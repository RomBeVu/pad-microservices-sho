{"ast":null,"code":"/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ExportResultCode } from '@opentelemetry/core';\nimport { DEFAULT_AGGREGATION_TEMPORALITY_SELECTOR } from './AggregationSelector';\n/**\n * This is an implementation of {@link PushMetricExporter} that prints metrics to the\n * console. This class can be used for diagnostic purposes.\n *\n * NOTE: This {@link PushMetricExporter} is intended for diagnostics use only, output rendered to the console may change at any time.\n */\n/* eslint-disable no-console */\nexport class ConsoleMetricExporter {\n  _shutdown = false;\n  _temporalitySelector;\n  constructor(options) {\n    this._temporalitySelector = options?.temporalitySelector ?? DEFAULT_AGGREGATION_TEMPORALITY_SELECTOR;\n  }\n  export(metrics, resultCallback) {\n    if (this._shutdown) {\n      // If the exporter is shutting down, by spec, we need to return FAILED as export result\n      setImmediate(resultCallback, {\n        code: ExportResultCode.FAILED\n      });\n      return;\n    }\n    return ConsoleMetricExporter._sendMetrics(metrics, resultCallback);\n  }\n  forceFlush() {\n    return Promise.resolve();\n  }\n  selectAggregationTemporality(_instrumentType) {\n    return this._temporalitySelector(_instrumentType);\n  }\n  shutdown() {\n    this._shutdown = true;\n    return Promise.resolve();\n  }\n  static _sendMetrics(metrics, done) {\n    for (const scopeMetrics of metrics.scopeMetrics) {\n      for (const metric of scopeMetrics.metrics) {\n        console.dir({\n          descriptor: metric.descriptor,\n          dataPointType: metric.dataPointType,\n          dataPoints: metric.dataPoints\n        }, {\n          depth: null\n        });\n      }\n    }\n    done({\n      code: ExportResultCode.SUCCESS\n    });\n  }\n}","map":{"version":3,"names":["ExportResultCode","DEFAULT_AGGREGATION_TEMPORALITY_SELECTOR","ConsoleMetricExporter","_shutdown","_temporalitySelector","constructor","options","temporalitySelector","export","metrics","resultCallback","setImmediate","code","FAILED","_sendMetrics","forceFlush","Promise","resolve","selectAggregationTemporality","_instrumentType","shutdown","done","scopeMetrics","metric","console","dir","descriptor","dataPointType","dataPoints","depth","SUCCESS"],"sources":["/home/senthilkumar/project/shopping-cart/frontend/node_modules/@opentelemetry/sdk-metrics/src/export/ConsoleMetricExporter.ts"],"sourcesContent":["/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ExportResult, ExportResultCode } from '@opentelemetry/core';\nimport { AggregationTemporality } from './AggregationTemporality';\nimport { ResourceMetrics, InstrumentType } from './MetricData';\nimport { PushMetricExporter } from './MetricExporter';\nimport {\n  AggregationTemporalitySelector,\n  DEFAULT_AGGREGATION_TEMPORALITY_SELECTOR,\n} from './AggregationSelector';\n\ninterface ConsoleMetricExporterOptions {\n  temporalitySelector?: AggregationTemporalitySelector;\n}\n\n/**\n * This is an implementation of {@link PushMetricExporter} that prints metrics to the\n * console. This class can be used for diagnostic purposes.\n *\n * NOTE: This {@link PushMetricExporter} is intended for diagnostics use only, output rendered to the console may change at any time.\n */\n\n/* eslint-disable no-console */\nexport class ConsoleMetricExporter implements PushMetricExporter {\n  protected _shutdown = false;\n  protected _temporalitySelector: AggregationTemporalitySelector;\n\n  constructor(options?: ConsoleMetricExporterOptions) {\n    this._temporalitySelector =\n      options?.temporalitySelector ?? DEFAULT_AGGREGATION_TEMPORALITY_SELECTOR;\n  }\n\n  export(\n    metrics: ResourceMetrics,\n    resultCallback: (result: ExportResult) => void\n  ): void {\n    if (this._shutdown) {\n      // If the exporter is shutting down, by spec, we need to return FAILED as export result\n      setImmediate(resultCallback, { code: ExportResultCode.FAILED });\n      return;\n    }\n\n    return ConsoleMetricExporter._sendMetrics(metrics, resultCallback);\n  }\n\n  forceFlush(): Promise<void> {\n    return Promise.resolve();\n  }\n\n  selectAggregationTemporality(\n    _instrumentType: InstrumentType\n  ): AggregationTemporality {\n    return this._temporalitySelector(_instrumentType);\n  }\n\n  shutdown(): Promise<void> {\n    this._shutdown = true;\n    return Promise.resolve();\n  }\n\n  private static _sendMetrics(\n    metrics: ResourceMetrics,\n    done: (result: ExportResult) => void\n  ): void {\n    for (const scopeMetrics of metrics.scopeMetrics) {\n      for (const metric of scopeMetrics.metrics) {\n        console.dir(\n          {\n            descriptor: metric.descriptor,\n            dataPointType: metric.dataPointType,\n            dataPoints: metric.dataPoints,\n          },\n          { depth: null }\n        );\n      }\n    }\n\n    done({ code: ExportResultCode.SUCCESS });\n  }\n}\n"],"mappings":"AAAA;;;;;;;;;;;;;;;AAeA,SAAuBA,gBAAgB,QAAQ,qBAAqB;AAIpE,SAEEC,wCAAwC,QACnC,uBAAuB;AAM9B;;;;;;AAOA;AACA,OAAM,MAAOC,qBAAqB;EACtBC,SAAS,GAAG,KAAK;EACjBC,oBAAoB;EAE9BC,YAAYC,OAAsC;IAChD,IAAI,CAACF,oBAAoB,GACvBE,OAAO,EAAEC,mBAAmB,IAAIN,wCAAwC;EAC5E;EAEAO,MAAMA,CACJC,OAAwB,EACxBC,cAA8C;IAE9C,IAAI,IAAI,CAACP,SAAS,EAAE;MAClB;MACAQ,YAAY,CAACD,cAAc,EAAE;QAAEE,IAAI,EAAEZ,gBAAgB,CAACa;MAAM,CAAE,CAAC;MAC/D;;IAGF,OAAOX,qBAAqB,CAACY,YAAY,CAACL,OAAO,EAAEC,cAAc,CAAC;EACpE;EAEAK,UAAUA,CAAA;IACR,OAAOC,OAAO,CAACC,OAAO,EAAE;EAC1B;EAEAC,4BAA4BA,CAC1BC,eAA+B;IAE/B,OAAO,IAAI,CAACf,oBAAoB,CAACe,eAAe,CAAC;EACnD;EAEAC,QAAQA,CAAA;IACN,IAAI,CAACjB,SAAS,GAAG,IAAI;IACrB,OAAOa,OAAO,CAACC,OAAO,EAAE;EAC1B;EAEQ,OAAOH,YAAYA,CACzBL,OAAwB,EACxBY,IAAoC;IAEpC,KAAK,MAAMC,YAAY,IAAIb,OAAO,CAACa,YAAY,EAAE;MAC/C,KAAK,MAAMC,MAAM,IAAID,YAAY,CAACb,OAAO,EAAE;QACzCe,OAAO,CAACC,GAAG,CACT;UACEC,UAAU,EAAEH,MAAM,CAACG,UAAU;UAC7BC,aAAa,EAAEJ,MAAM,CAACI,aAAa;UACnCC,UAAU,EAAEL,MAAM,CAACK;SACpB,EACD;UAAEC,KAAK,EAAE;QAAI,CAAE,CAChB;;;IAILR,IAAI,CAAC;MAAET,IAAI,EAAEZ,gBAAgB,CAAC8B;IAAO,CAAE,CAAC;EAC1C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}