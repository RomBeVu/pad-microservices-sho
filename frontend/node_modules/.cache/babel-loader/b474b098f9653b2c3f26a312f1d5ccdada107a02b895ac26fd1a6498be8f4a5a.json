{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\n\n// === ASYNC THUNKS ===\n\n// Fetch all products\nexport const fetchProducts = createAsyncThunk('products/fetchAll', async () => {\n  const token = localStorage.getItem('token');\n  const res = await fetch(`${process.env.REACT_APP_PRODUCT_URL}/products`, {\n    headers: {\n      'Authorization': `Bearer ${token}`\n    }\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.message || 'Failed to fetch products');\n  return data;\n});\n\n// Fetch single product by ID\nexport const fetchProductById = createAsyncThunk('products/fetchById', async id => {\n  const token = localStorage.getItem('token');\n  const res = await fetch(`${process.env.REACT_APP_PRODUCT_URL}/products/${id}`, {\n    headers: {\n      'Authorization': `Bearer ${token}`\n    }\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.message || 'Failed to fetch product');\n  return data;\n});\n\n// === SLICE ===\nconst productSlice = createSlice({\n  name: 'products',\n  initialState: {\n    list: [],\n    selected: null,\n    loading: false,\n    error: null\n  },\n  reducers: {\n    clearSelected: state => {\n      state.selected = null;\n    }\n  },\n  extraReducers: builder => {\n    builder\n    // Fetch all\n    .addCase(fetchProducts.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(fetchProducts.fulfilled, (state, action) => {\n      state.list = action.payload;\n      state.loading = false;\n    }).addCase(fetchProducts.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.error.message;\n    })\n\n    // Fetch by ID\n    .addCase(fetchProductById.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(fetchProductById.fulfilled, (state, action) => {\n      state.selected = action.payload;\n      state.loading = false;\n    }).addCase(fetchProductById.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.error.message;\n    });\n  }\n});\nexport const {\n  clearSelected\n} = productSlice.actions;\nexport default productSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","fetchProducts","token","localStorage","getItem","res","fetch","process","env","REACT_APP_PRODUCT_URL","headers","data","json","ok","Error","message","fetchProductById","id","productSlice","name","initialState","list","selected","loading","error","reducers","clearSelected","state","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","actions","reducer"],"sources":["/home/senthilkumar/project/shopping-cart/frontend/src/slices/productSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\n\n// === ASYNC THUNKS ===\n\n// Fetch all products\nexport const fetchProducts = createAsyncThunk('products/fetchAll', async () => {\n  const token = localStorage.getItem('token');\n  const res = await fetch(`${process.env.REACT_APP_PRODUCT_URL}/products`, {\n    headers: {\n      'Authorization': `Bearer ${token}`,\n    },\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.message || 'Failed to fetch products');\n  return data;\n});\n\n\n// Fetch single product by ID\nexport const fetchProductById = createAsyncThunk('products/fetchById', async (id) => {\n  const token = localStorage.getItem('token');\n  const res = await fetch(`${process.env.REACT_APP_PRODUCT_URL}/products/${id}`, {\n    headers: {\n      'Authorization': `Bearer ${token}`,\n    },\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.message || 'Failed to fetch product');\n  return data;\n});\n\n// === SLICE ===\nconst productSlice = createSlice({\n  name: 'products',\n  initialState: {\n    list: [],\n    selected: null,\n    loading: false,\n    error: null,\n  },\n  reducers: {\n    clearSelected: (state) => {\n      state.selected = null;\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      // Fetch all\n      .addCase(fetchProducts.pending, (state) => {\n        state.loading = true;\n        state.error = null;\n      })\n      .addCase(fetchProducts.fulfilled, (state, action) => {\n        state.list = action.payload;\n        state.loading = false;\n      })\n      .addCase(fetchProducts.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.error.message;\n      })\n\n      // Fetch by ID\n      .addCase(fetchProductById.pending, (state) => {\n        state.loading = true;\n        state.error = null;\n      })\n      .addCase(fetchProductById.fulfilled, (state, action) => {\n        state.selected = action.payload;\n        state.loading = false;\n      })\n      .addCase(fetchProductById.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.error.message;\n      });\n  },\n});\n\nexport const { clearSelected } = productSlice.actions;\nexport default productSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}