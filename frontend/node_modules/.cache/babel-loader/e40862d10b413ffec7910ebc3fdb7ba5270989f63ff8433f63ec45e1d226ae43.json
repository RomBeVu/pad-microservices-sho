{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\n\n// === Async Thunks ===\n\nexport const getCart = createAsyncThunk('cart/get', async userId => {\n  const token = localStorage.getItem('token');\n  const res = await fetch(`${process.env.REACT_APP_CART_URL}/cart/${userId}`, {\n    headers: {\n      'Authorization': `Bearer ${token}`\n    }\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.message || 'Failed to fetch cart');\n  return data;\n});\nexport const addToCart = createAsyncThunk('cart/add', async ({\n  userId,\n  productId,\n  quantity\n}) => {\n  const token = localStorage.getItem('token');\n  const res = await fetch(`${process.env.REACT_APP_CART_URL}/cart/${userId}/add`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    },\n    body: JSON.stringify({\n      productId,\n      quantity\n    })\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.message || 'Failed to add to cart');\n  return data;\n});\nexport const removeFromCart = createAsyncThunk('cart/remove', async ({\n  userId,\n  productId\n}) => {\n  const token = localStorage.getItem('token');\n  const res = await fetch(`${process.env.REACT_APP_CART_URL}/cart/${userId}/remove`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    },\n    body: JSON.stringify({\n      productId\n    })\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.message || 'Failed to remove item');\n  return data;\n});\nexport const clearCart = createAsyncThunk('cart/clear', async userId => {\n  const token = localStorage.getItem('token');\n  const res = await fetch(`${process.env.REACT_APP_CART_URL}/cart/${userId}/clear`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    }\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.message || 'Failed to clear cart');\n  return data;\n});\nexport const checkoutCart = createAsyncThunk('cart/checkout', async userId => {\n  const token = localStorage.getItem('token');\n  const res = await fetch(`${process.env.REACT_APP_CART_URL}/cart/${userId}/checkout`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    }\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.message || 'Checkout failed');\n  return data;\n});\n\n// === Slice ===\n\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState: {\n    items: [],\n    loading: false,\n    error: null,\n    checkedOut: false\n  },\n  reducers: {\n    resetCart: state => {\n      state.items = [];\n      state.checkedOut = false;\n      state.error = null;\n    }\n  },\n  extraReducers: builder => {\n    builder\n    // Get Cart\n    .addCase(getCart.pending, state => {\n      state.loading = true;\n    }).addCase(getCart.fulfilled, (state, action) => {\n      state.items = action.payload.items;\n      state.loading = false;\n    }).addCase(getCart.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.error.message;\n    })\n\n    // Add\n    .addCase(addToCart.fulfilled, (state, action) => {\n      state.items = action.payload.items;\n      state.loading = false;\n    })\n\n    // Remove\n    .addCase(removeFromCart.fulfilled, (state, action) => {\n      state.items = action.payload.items;\n      state.loading = false;\n    })\n\n    // Clear\n    .addCase(clearCart.fulfilled, (state, action) => {\n      state.items = [];\n      state.loading = false;\n    })\n\n    // Checkout\n    .addCase(checkoutCart.fulfilled, (state, action) => {\n      state.checkedOut = true;\n      state.items = [];\n      state.loading = false;\n    })\n\n    // Common Loading/Error for all\n    .addMatcher(action => action.type.startsWith('cart/') && action.type.endsWith('/pending'), state => {\n      state.loading = true;\n      state.error = null;\n    }).addMatcher(action => action.type.startsWith('cart/') && action.type.endsWith('/rejected'), (state, action) => {\n      state.loading = false;\n      state.error = action.error.message;\n    });\n  }\n});\nexport const {\n  resetCart\n} = cartSlice.actions;\nexport default cartSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","getCart","userId","token","localStorage","getItem","res","fetch","process","env","REACT_APP_CART_URL","headers","data","json","ok","Error","message","addToCart","productId","quantity","method","body","JSON","stringify","removeFromCart","clearCart","checkoutCart","cartSlice","name","initialState","items","loading","error","checkedOut","reducers","resetCart","state","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","addMatcher","type","startsWith","endsWith","actions","reducer"],"sources":["/home/senthilkumar/project/shopping-cart/frontend/src/slices/cartSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\n\n// === Async Thunks ===\n\nexport const getCart = createAsyncThunk('cart/get', async (userId) => {\n  const token = localStorage.getItem('token');\n  const res = await fetch(`${process.env.REACT_APP_CART_URL}/cart/${userId}`, {\n    headers: { 'Authorization': `Bearer ${token}` }\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.message || 'Failed to fetch cart');\n  return data;\n});\n\nexport const addToCart = createAsyncThunk('cart/add', async ({ userId, productId, quantity }) => {\n  const token = localStorage.getItem('token');\n  const res = await fetch(`${process.env.REACT_APP_CART_URL}/cart/${userId}/add`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`,\n    },\n    body: JSON.stringify({ productId, quantity }),\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.message || 'Failed to add to cart');\n  return data;\n});\n\nexport const removeFromCart = createAsyncThunk('cart/remove', async ({ userId, productId }) => {\n  const token = localStorage.getItem('token');\n  const res = await fetch(`${process.env.REACT_APP_CART_URL}/cart/${userId}/remove`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`,\n    },\n    body: JSON.stringify({ productId }),\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.message || 'Failed to remove item');\n  return data;\n});\n\nexport const clearCart = createAsyncThunk('cart/clear', async (userId) => {\n  const token = localStorage.getItem('token');\n  const res = await fetch(`${process.env.REACT_APP_CART_URL}/cart/${userId}/clear`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`,\n    }\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.message || 'Failed to clear cart');\n  return data;\n});\n\nexport const checkoutCart = createAsyncThunk('cart/checkout', async (userId) => {\n  const token = localStorage.getItem('token');\n  const res = await fetch(`${process.env.REACT_APP_CART_URL}/cart/${userId}/checkout`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`,\n    }\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.message || 'Checkout failed');\n  return data;\n});\n\n// === Slice ===\n\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState: {\n    items: [],\n    loading: false,\n    error: null,\n    checkedOut: false,\n  },\n  reducers: {\n    resetCart: (state) => {\n      state.items = [];\n      state.checkedOut = false;\n      state.error = null;\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      // Get Cart\n      .addCase(getCart.pending, (state) => {\n        state.loading = true;\n      })\n      .addCase(getCart.fulfilled, (state, action) => {\n        state.items = action.payload.items;\n        state.loading = false;\n      })\n      .addCase(getCart.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.error.message;\n      })\n\n      // Add\n      .addCase(addToCart.fulfilled, (state, action) => {\n        state.items = action.payload.items;\n        state.loading = false;\n      })\n\n      // Remove\n      .addCase(removeFromCart.fulfilled, (state, action) => {\n        state.items = action.payload.items;\n        state.loading = false;\n      })\n\n      // Clear\n      .addCase(clearCart.fulfilled, (state, action) => {\n        state.items = [];\n        state.loading = false;\n      })\n\n      // Checkout\n      .addCase(checkoutCart.fulfilled, (state, action) => {\n        state.checkedOut = true;\n        state.items = [];\n        state.loading = false;\n      })\n\n      // Common Loading/Error for all\n      .addMatcher(action => action.type.startsWith('cart/') && action.type.endsWith('/pending'),\n        (state) => {\n          state.loading = true;\n          state.error = null;\n        })\n      .addMatcher(action => action.type.startsWith('cart/') && action.type.endsWith('/rejected'),\n        (state, action) => {\n          state.loading = false;\n          state.error = action.error.message;\n        });\n  }\n});\n\nexport const { resetCart } = cartSlice.actions;\nexport default cartSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}