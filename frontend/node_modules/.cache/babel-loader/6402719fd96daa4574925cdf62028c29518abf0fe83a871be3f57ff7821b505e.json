{"ast":null,"code":"/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { context, propagation, trace, ROOT_CONTEXT } from '@opentelemetry/api';\nimport { otperformance, TRACE_PARENT_HEADER } from '@opentelemetry/core';\nimport { addSpanNetworkEvent, addSpanNetworkEvents, hasKey, PerformanceTimingNames as PTN } from '@opentelemetry/sdk-trace-web';\nimport { InstrumentationBase, safeExecuteInTheMiddle } from '@opentelemetry/instrumentation';\nimport { AttributeNames } from './enums/AttributeNames';\n/** @knipignore */\nimport { PACKAGE_NAME, PACKAGE_VERSION } from './version';\nimport { SEMATTRS_HTTP_URL, SEMATTRS_HTTP_USER_AGENT } from '@opentelemetry/semantic-conventions';\nimport { addSpanPerformancePaintEvents, getPerformanceNavigationEntries } from './utils';\n/**\n * This class represents a document load plugin\n */\nexport class DocumentLoadInstrumentation extends InstrumentationBase {\n  component = 'document-load';\n  version = '1';\n  moduleName = this.component;\n  constructor(config = {}) {\n    super(PACKAGE_NAME, PACKAGE_VERSION, config);\n  }\n  init() {}\n  /**\n   * callback to be executed when page is loaded\n   */\n  _onDocumentLoaded() {\n    // Timeout is needed as load event doesn't have yet the performance metrics for loadEnd.\n    // Support for event \"loadend\" is very limited and cannot be used\n    window.setTimeout(() => {\n      this._collectPerformance();\n    });\n  }\n  /**\n   * Adds spans for all resources\n   * @param rootSpan\n   */\n  _addResourcesSpans(rootSpan) {\n    const resources = otperformance.getEntriesByType?.('resource');\n    if (resources) {\n      resources.forEach(resource => {\n        this._initResourceSpan(resource, rootSpan);\n      });\n    }\n  }\n  /**\n   * Collects information about performance and creates appropriate spans\n   */\n  _collectPerformance() {\n    const metaElement = Array.from(document.getElementsByTagName('meta')).find(e => e.getAttribute('name') === TRACE_PARENT_HEADER);\n    const entries = getPerformanceNavigationEntries();\n    const traceparent = metaElement && metaElement.content || '';\n    context.with(propagation.extract(ROOT_CONTEXT, {\n      traceparent\n    }), () => {\n      const rootSpan = this._startSpan(AttributeNames.DOCUMENT_LOAD, PTN.FETCH_START, entries);\n      if (!rootSpan) {\n        return;\n      }\n      context.with(trace.setSpan(context.active(), rootSpan), () => {\n        const fetchSpan = this._startSpan(AttributeNames.DOCUMENT_FETCH, PTN.FETCH_START, entries);\n        if (fetchSpan) {\n          fetchSpan.setAttribute(SEMATTRS_HTTP_URL, location.href);\n          context.with(trace.setSpan(context.active(), fetchSpan), () => {\n            if (!this.getConfig().ignoreNetworkEvents) {\n              addSpanNetworkEvents(fetchSpan, entries);\n            }\n            this._addCustomAttributesOnSpan(fetchSpan, this.getConfig().applyCustomAttributesOnSpan?.documentFetch);\n            this._endSpan(fetchSpan, PTN.RESPONSE_END, entries);\n          });\n        }\n      });\n      rootSpan.setAttribute(SEMATTRS_HTTP_URL, location.href);\n      rootSpan.setAttribute(SEMATTRS_HTTP_USER_AGENT, navigator.userAgent);\n      this._addResourcesSpans(rootSpan);\n      if (!this.getConfig().ignoreNetworkEvents) {\n        addSpanNetworkEvent(rootSpan, PTN.FETCH_START, entries);\n        addSpanNetworkEvent(rootSpan, PTN.UNLOAD_EVENT_START, entries);\n        addSpanNetworkEvent(rootSpan, PTN.UNLOAD_EVENT_END, entries);\n        addSpanNetworkEvent(rootSpan, PTN.DOM_INTERACTIVE, entries);\n        addSpanNetworkEvent(rootSpan, PTN.DOM_CONTENT_LOADED_EVENT_START, entries);\n        addSpanNetworkEvent(rootSpan, PTN.DOM_CONTENT_LOADED_EVENT_END, entries);\n        addSpanNetworkEvent(rootSpan, PTN.DOM_COMPLETE, entries);\n        addSpanNetworkEvent(rootSpan, PTN.LOAD_EVENT_START, entries);\n        addSpanNetworkEvent(rootSpan, PTN.LOAD_EVENT_END, entries);\n      }\n      if (!this.getConfig().ignorePerformancePaintEvents) {\n        addSpanPerformancePaintEvents(rootSpan);\n      }\n      this._addCustomAttributesOnSpan(rootSpan, this.getConfig().applyCustomAttributesOnSpan?.documentLoad);\n      this._endSpan(rootSpan, PTN.LOAD_EVENT_END, entries);\n    });\n  }\n  /**\n   * Helper function for ending span\n   * @param span\n   * @param performanceName name of performance entry for time end\n   * @param entries\n   */\n  _endSpan(span, performanceName, entries) {\n    // span can be undefined when entries are missing the certain performance - the span will not be created\n    if (span) {\n      if (hasKey(entries, performanceName)) {\n        span.end(entries[performanceName]);\n      } else {\n        // just end span\n        span.end();\n      }\n    }\n  }\n  /**\n   * Creates and ends a span with network information about resource added as timed events\n   * @param resource\n   * @param parentSpan\n   */\n  _initResourceSpan(resource, parentSpan) {\n    const span = this._startSpan(AttributeNames.RESOURCE_FETCH, PTN.FETCH_START, resource, parentSpan);\n    if (span) {\n      span.setAttribute(SEMATTRS_HTTP_URL, resource.name);\n      if (!this.getConfig().ignoreNetworkEvents) {\n        addSpanNetworkEvents(span, resource);\n      }\n      this._addCustomAttributesOnResourceSpan(span, resource, this.getConfig().applyCustomAttributesOnSpan?.resourceFetch);\n      this._endSpan(span, PTN.RESPONSE_END, resource);\n    }\n  }\n  /**\n   * Helper function for starting a span\n   * @param spanName name of span\n   * @param performanceName name of performance entry for time start\n   * @param entries\n   * @param parentSpan\n   */\n  _startSpan(spanName, performanceName, entries, parentSpan) {\n    if (hasKey(entries, performanceName) && typeof entries[performanceName] === 'number') {\n      const span = this.tracer.startSpan(spanName, {\n        startTime: entries[performanceName]\n      }, parentSpan ? trace.setSpan(context.active(), parentSpan) : undefined);\n      return span;\n    }\n    return undefined;\n  }\n  /**\n   * executes callback {_onDocumentLoaded} when the page is loaded\n   */\n  _waitForPageLoad() {\n    if (window.document.readyState === 'complete') {\n      this._onDocumentLoaded();\n    } else {\n      this._onDocumentLoaded = this._onDocumentLoaded.bind(this);\n      window.addEventListener('load', this._onDocumentLoaded);\n    }\n  }\n  /**\n   * adds custom attributes to root span if configured\n   */\n  _addCustomAttributesOnSpan(span, applyCustomAttributesOnSpan) {\n    if (applyCustomAttributesOnSpan) {\n      safeExecuteInTheMiddle(() => applyCustomAttributesOnSpan(span), error => {\n        if (!error) {\n          return;\n        }\n        this._diag.error('addCustomAttributesOnSpan', error);\n      }, true);\n    }\n  }\n  /**\n   * adds custom attributes to span if configured\n   */\n  _addCustomAttributesOnResourceSpan(span, resource, applyCustomAttributesOnSpan) {\n    if (applyCustomAttributesOnSpan) {\n      safeExecuteInTheMiddle(() => applyCustomAttributesOnSpan(span, resource), error => {\n        if (!error) {\n          return;\n        }\n        this._diag.error('addCustomAttributesOnResourceSpan', error);\n      }, true);\n    }\n  }\n  /**\n   * implements enable function\n   */\n  enable() {\n    // remove previously attached load to avoid adding the same event twice\n    // in case of multiple enable calling.\n    window.removeEventListener('load', this._onDocumentLoaded);\n    this._waitForPageLoad();\n  }\n  /**\n   * implements disable function\n   */\n  disable() {\n    window.removeEventListener('load', this._onDocumentLoaded);\n  }\n}","map":{"version":3,"names":["context","propagation","trace","ROOT_CONTEXT","otperformance","TRACE_PARENT_HEADER","addSpanNetworkEvent","addSpanNetworkEvents","hasKey","PerformanceTimingNames","PTN","InstrumentationBase","safeExecuteInTheMiddle","AttributeNames","PACKAGE_NAME","PACKAGE_VERSION","SEMATTRS_HTTP_URL","SEMATTRS_HTTP_USER_AGENT","addSpanPerformancePaintEvents","getPerformanceNavigationEntries","DocumentLoadInstrumentation","component","version","moduleName","constructor","config","init","_onDocumentLoaded","window","setTimeout","_collectPerformance","_addResourcesSpans","rootSpan","resources","getEntriesByType","forEach","resource","_initResourceSpan","metaElement","Array","from","document","getElementsByTagName","find","e","getAttribute","entries","traceparent","content","with","extract","_startSpan","DOCUMENT_LOAD","FETCH_START","setSpan","active","fetchSpan","DOCUMENT_FETCH","setAttribute","location","href","getConfig","ignoreNetworkEvents","_addCustomAttributesOnSpan","applyCustomAttributesOnSpan","documentFetch","_endSpan","RESPONSE_END","navigator","userAgent","UNLOAD_EVENT_START","UNLOAD_EVENT_END","DOM_INTERACTIVE","DOM_CONTENT_LOADED_EVENT_START","DOM_CONTENT_LOADED_EVENT_END","DOM_COMPLETE","LOAD_EVENT_START","LOAD_EVENT_END","ignorePerformancePaintEvents","documentLoad","span","performanceName","end","parentSpan","RESOURCE_FETCH","name","_addCustomAttributesOnResourceSpan","resourceFetch","spanName","tracer","startSpan","startTime","undefined","_waitForPageLoad","readyState","bind","addEventListener","error","_diag","enable","removeEventListener","disable"],"sources":["/home/senthilkumar/project/shopping-cart/frontend/node_modules/@opentelemetry/instrumentation-document-load/src/instrumentation.ts"],"sourcesContent":["/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  context,\n  propagation,\n  trace,\n  Span,\n  ROOT_CONTEXT,\n} from '@opentelemetry/api';\nimport { otperformance, TRACE_PARENT_HEADER } from '@opentelemetry/core';\nimport {\n  addSpanNetworkEvent,\n  addSpanNetworkEvents,\n  hasKey,\n  PerformanceEntries,\n  PerformanceTimingNames as PTN,\n} from '@opentelemetry/sdk-trace-web';\nimport {\n  InstrumentationBase,\n  safeExecuteInTheMiddle,\n} from '@opentelemetry/instrumentation';\nimport {\n  DocumentLoadCustomAttributeFunction,\n  DocumentLoadInstrumentationConfig,\n  ResourceFetchCustomAttributeFunction,\n} from './types';\nimport { AttributeNames } from './enums/AttributeNames';\n/** @knipignore */\nimport { PACKAGE_NAME, PACKAGE_VERSION } from './version';\nimport {\n  SEMATTRS_HTTP_URL,\n  SEMATTRS_HTTP_USER_AGENT,\n} from '@opentelemetry/semantic-conventions';\nimport {\n  addSpanPerformancePaintEvents,\n  getPerformanceNavigationEntries,\n} from './utils';\n\n/**\n * This class represents a document load plugin\n */\nexport class DocumentLoadInstrumentation extends InstrumentationBase<DocumentLoadInstrumentationConfig> {\n  readonly component: string = 'document-load';\n  readonly version: string = '1';\n  moduleName = this.component;\n\n  constructor(config: DocumentLoadInstrumentationConfig = {}) {\n    super(PACKAGE_NAME, PACKAGE_VERSION, config);\n  }\n\n  init() {}\n\n  /**\n   * callback to be executed when page is loaded\n   */\n  private _onDocumentLoaded() {\n    // Timeout is needed as load event doesn't have yet the performance metrics for loadEnd.\n    // Support for event \"loadend\" is very limited and cannot be used\n    window.setTimeout(() => {\n      this._collectPerformance();\n    });\n  }\n\n  /**\n   * Adds spans for all resources\n   * @param rootSpan\n   */\n  private _addResourcesSpans(rootSpan: Span): void {\n    const resources: PerformanceResourceTiming[] = (\n      otperformance as unknown as Performance\n    ).getEntriesByType?.('resource') as PerformanceResourceTiming[];\n    if (resources) {\n      resources.forEach(resource => {\n        this._initResourceSpan(resource, rootSpan);\n      });\n    }\n  }\n\n  /**\n   * Collects information about performance and creates appropriate spans\n   */\n  private _collectPerformance() {\n    const metaElement = Array.from(document.getElementsByTagName('meta')).find(\n      e => e.getAttribute('name') === TRACE_PARENT_HEADER\n    );\n    const entries = getPerformanceNavigationEntries();\n    const traceparent = (metaElement && metaElement.content) || '';\n    context.with(propagation.extract(ROOT_CONTEXT, { traceparent }), () => {\n      const rootSpan = this._startSpan(\n        AttributeNames.DOCUMENT_LOAD,\n        PTN.FETCH_START,\n        entries\n      );\n      if (!rootSpan) {\n        return;\n      }\n      context.with(trace.setSpan(context.active(), rootSpan), () => {\n        const fetchSpan = this._startSpan(\n          AttributeNames.DOCUMENT_FETCH,\n          PTN.FETCH_START,\n          entries\n        );\n        if (fetchSpan) {\n          fetchSpan.setAttribute(SEMATTRS_HTTP_URL, location.href);\n          context.with(trace.setSpan(context.active(), fetchSpan), () => {\n            if (!this.getConfig().ignoreNetworkEvents) {\n              addSpanNetworkEvents(fetchSpan, entries);\n            }\n            this._addCustomAttributesOnSpan(\n              fetchSpan,\n              this.getConfig().applyCustomAttributesOnSpan?.documentFetch\n            );\n            this._endSpan(fetchSpan, PTN.RESPONSE_END, entries);\n          });\n        }\n      });\n\n      rootSpan.setAttribute(SEMATTRS_HTTP_URL, location.href);\n      rootSpan.setAttribute(SEMATTRS_HTTP_USER_AGENT, navigator.userAgent);\n\n      this._addResourcesSpans(rootSpan);\n\n      if (!this.getConfig().ignoreNetworkEvents) {\n        addSpanNetworkEvent(rootSpan, PTN.FETCH_START, entries);\n        addSpanNetworkEvent(rootSpan, PTN.UNLOAD_EVENT_START, entries);\n        addSpanNetworkEvent(rootSpan, PTN.UNLOAD_EVENT_END, entries);\n        addSpanNetworkEvent(rootSpan, PTN.DOM_INTERACTIVE, entries);\n        addSpanNetworkEvent(\n          rootSpan,\n          PTN.DOM_CONTENT_LOADED_EVENT_START,\n          entries\n        );\n        addSpanNetworkEvent(\n          rootSpan,\n          PTN.DOM_CONTENT_LOADED_EVENT_END,\n          entries\n        );\n        addSpanNetworkEvent(rootSpan, PTN.DOM_COMPLETE, entries);\n        addSpanNetworkEvent(rootSpan, PTN.LOAD_EVENT_START, entries);\n        addSpanNetworkEvent(rootSpan, PTN.LOAD_EVENT_END, entries);\n      }\n\n      if (!this.getConfig().ignorePerformancePaintEvents) {\n        addSpanPerformancePaintEvents(rootSpan);\n      }\n\n      this._addCustomAttributesOnSpan(\n        rootSpan,\n        this.getConfig().applyCustomAttributesOnSpan?.documentLoad\n      );\n      this._endSpan(rootSpan, PTN.LOAD_EVENT_END, entries);\n    });\n  }\n\n  /**\n   * Helper function for ending span\n   * @param span\n   * @param performanceName name of performance entry for time end\n   * @param entries\n   */\n  private _endSpan(\n    span: Span | undefined,\n    performanceName: string,\n    entries: PerformanceEntries\n  ) {\n    // span can be undefined when entries are missing the certain performance - the span will not be created\n    if (span) {\n      if (hasKey(entries, performanceName)) {\n        span.end(entries[performanceName]);\n      } else {\n        // just end span\n        span.end();\n      }\n    }\n  }\n\n  /**\n   * Creates and ends a span with network information about resource added as timed events\n   * @param resource\n   * @param parentSpan\n   */\n  private _initResourceSpan(\n    resource: PerformanceResourceTiming,\n    parentSpan: Span\n  ) {\n    const span = this._startSpan(\n      AttributeNames.RESOURCE_FETCH,\n      PTN.FETCH_START,\n      resource,\n      parentSpan\n    );\n    if (span) {\n      span.setAttribute(SEMATTRS_HTTP_URL, resource.name);\n      if (!this.getConfig().ignoreNetworkEvents) {\n        addSpanNetworkEvents(span, resource);\n      }\n      this._addCustomAttributesOnResourceSpan(\n        span,\n        resource,\n        this.getConfig().applyCustomAttributesOnSpan?.resourceFetch\n      );\n      this._endSpan(span, PTN.RESPONSE_END, resource);\n    }\n  }\n\n  /**\n   * Helper function for starting a span\n   * @param spanName name of span\n   * @param performanceName name of performance entry for time start\n   * @param entries\n   * @param parentSpan\n   */\n  private _startSpan(\n    spanName: string,\n    performanceName: string,\n    entries: PerformanceEntries,\n    parentSpan?: Span\n  ): Span | undefined {\n    if (\n      hasKey(entries, performanceName) &&\n      typeof entries[performanceName] === 'number'\n    ) {\n      const span = this.tracer.startSpan(\n        spanName,\n        {\n          startTime: entries[performanceName],\n        },\n        parentSpan ? trace.setSpan(context.active(), parentSpan) : undefined\n      );\n      return span;\n    }\n    return undefined;\n  }\n\n  /**\n   * executes callback {_onDocumentLoaded} when the page is loaded\n   */\n  private _waitForPageLoad() {\n    if (window.document.readyState === 'complete') {\n      this._onDocumentLoaded();\n    } else {\n      this._onDocumentLoaded = this._onDocumentLoaded.bind(this);\n      window.addEventListener('load', this._onDocumentLoaded);\n    }\n  }\n\n  /**\n   * adds custom attributes to root span if configured\n   */\n  private _addCustomAttributesOnSpan(\n    span: Span,\n    applyCustomAttributesOnSpan: DocumentLoadCustomAttributeFunction | undefined\n  ) {\n    if (applyCustomAttributesOnSpan) {\n      safeExecuteInTheMiddle(\n        () => applyCustomAttributesOnSpan(span),\n        error => {\n          if (!error) {\n            return;\n          }\n\n          this._diag.error('addCustomAttributesOnSpan', error);\n        },\n        true\n      );\n    }\n  }\n\n  /**\n   * adds custom attributes to span if configured\n   */\n  private _addCustomAttributesOnResourceSpan(\n    span: Span,\n    resource: PerformanceResourceTiming,\n    applyCustomAttributesOnSpan:\n      | ResourceFetchCustomAttributeFunction\n      | undefined\n  ) {\n    if (applyCustomAttributesOnSpan) {\n      safeExecuteInTheMiddle(\n        () => applyCustomAttributesOnSpan(span, resource),\n        error => {\n          if (!error) {\n            return;\n          }\n\n          this._diag.error('addCustomAttributesOnResourceSpan', error);\n        },\n        true\n      );\n    }\n  }\n\n  /**\n   * implements enable function\n   */\n  override enable() {\n    // remove previously attached load to avoid adding the same event twice\n    // in case of multiple enable calling.\n    window.removeEventListener('load', this._onDocumentLoaded);\n    this._waitForPageLoad();\n  }\n\n  /**\n   * implements disable function\n   */\n  override disable() {\n    window.removeEventListener('load', this._onDocumentLoaded);\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}