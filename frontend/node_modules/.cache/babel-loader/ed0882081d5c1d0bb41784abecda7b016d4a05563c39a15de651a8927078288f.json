{"ast":null,"code":"/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { hashAttributes } from '../utils';\nexport class HashMap {\n  _hash;\n  _valueMap = new Map();\n  _keyMap = new Map();\n  constructor(_hash) {\n    this._hash = _hash;\n  }\n  get(key, hashCode) {\n    hashCode ??= this._hash(key);\n    return this._valueMap.get(hashCode);\n  }\n  getOrDefault(key, defaultFactory) {\n    const hash = this._hash(key);\n    if (this._valueMap.has(hash)) {\n      return this._valueMap.get(hash);\n    }\n    const val = defaultFactory();\n    if (!this._keyMap.has(hash)) {\n      this._keyMap.set(hash, key);\n    }\n    this._valueMap.set(hash, val);\n    return val;\n  }\n  set(key, value, hashCode) {\n    hashCode ??= this._hash(key);\n    if (!this._keyMap.has(hashCode)) {\n      this._keyMap.set(hashCode, key);\n    }\n    this._valueMap.set(hashCode, value);\n  }\n  has(key, hashCode) {\n    hashCode ??= this._hash(key);\n    return this._valueMap.has(hashCode);\n  }\n  *keys() {\n    const keyIterator = this._keyMap.entries();\n    let next = keyIterator.next();\n    while (next.done !== true) {\n      yield [next.value[1], next.value[0]];\n      next = keyIterator.next();\n    }\n  }\n  *entries() {\n    const valueIterator = this._valueMap.entries();\n    let next = valueIterator.next();\n    while (next.done !== true) {\n      // next.value[0] here can not be undefined\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      yield [this._keyMap.get(next.value[0]), next.value[1], next.value[0]];\n      next = valueIterator.next();\n    }\n  }\n  get size() {\n    return this._valueMap.size;\n  }\n}\nexport class AttributeHashMap extends HashMap {\n  constructor() {\n    super(hashAttributes);\n  }\n}","map":{"version":3,"names":["hashAttributes","HashMap","_hash","_valueMap","Map","_keyMap","constructor","get","key","hashCode","getOrDefault","defaultFactory","hash","has","val","set","value","keys","keyIterator","entries","next","done","valueIterator","size","AttributeHashMap"],"sources":["/home/senthilkumar/project/shopping-cart/frontend/node_modules/@opentelemetry/sdk-metrics/src/state/HashMap.ts"],"sourcesContent":["/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Attributes } from '@opentelemetry/api';\nimport { hashAttributes } from '../utils';\n\nexport interface Hash<ValueType, HashCodeType> {\n  (value: ValueType): HashCodeType;\n}\n\nexport class HashMap<KeyType, ValueType, HashCodeType> {\n  private _valueMap = new Map<HashCodeType, ValueType>();\n  private _keyMap = new Map<HashCodeType, KeyType>();\n\n  constructor(private _hash: Hash<KeyType, HashCodeType>) {}\n\n  get(key: KeyType, hashCode?: HashCodeType) {\n    hashCode ??= this._hash(key);\n    return this._valueMap.get(hashCode);\n  }\n\n  getOrDefault(key: KeyType, defaultFactory: () => ValueType) {\n    const hash = this._hash(key);\n    if (this._valueMap.has(hash)) {\n      return this._valueMap.get(hash);\n    }\n    const val = defaultFactory();\n    if (!this._keyMap.has(hash)) {\n      this._keyMap.set(hash, key);\n    }\n    this._valueMap.set(hash, val);\n    return val;\n  }\n\n  set(key: KeyType, value: ValueType, hashCode?: HashCodeType) {\n    hashCode ??= this._hash(key);\n    if (!this._keyMap.has(hashCode)) {\n      this._keyMap.set(hashCode, key);\n    }\n    this._valueMap.set(hashCode, value);\n  }\n\n  has(key: KeyType, hashCode?: HashCodeType) {\n    hashCode ??= this._hash(key);\n    return this._valueMap.has(hashCode);\n  }\n\n  *keys(): IterableIterator<[KeyType, HashCodeType]> {\n    const keyIterator = this._keyMap.entries();\n    let next = keyIterator.next();\n    while (next.done !== true) {\n      yield [next.value[1], next.value[0]];\n      next = keyIterator.next();\n    }\n  }\n\n  *entries(): IterableIterator<[KeyType, ValueType, HashCodeType]> {\n    const valueIterator = this._valueMap.entries();\n    let next = valueIterator.next();\n    while (next.done !== true) {\n      // next.value[0] here can not be undefined\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      yield [this._keyMap.get(next.value[0])!, next.value[1], next.value[0]];\n      next = valueIterator.next();\n    }\n  }\n\n  get size() {\n    return this._valueMap.size;\n  }\n}\n\nexport class AttributeHashMap<ValueType> extends HashMap<\n  Attributes,\n  ValueType,\n  string\n> {\n  constructor() {\n    super(hashAttributes);\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}